### 프로그래머스 <br>
## 연도별 대장균 크기의 편차 구하기  <br>
- WITH절 사용 (CTE 정의) <br>
- <https://school.programmers.co.kr/learn/courses/30/lessons/299310> <br> <br>

<br> 서브쿼리 코드
```sql
SELECT YEAR(DIFFERENTIATION_DATE) YEAR, 
    (SELECT MAX(SIZE_OF_COLONY) FROM ECOLI_DATA
     WHERE YEAR(DIFFERENTIATION_DATE) = YEAR) - SIZE_OF_COLONY as YEAR_DEV,
     ID
FROM ECOLI_DATA 
ORDER BY YEAR, YEAR_DEV;
```

<br> WITH 코드
```sql
WITH MAX_SIZE AS (
    SELECT YEAR(DIFFERENTIATION_DATE) AS YEAR, MAX(SIZE_OF_COLONY) AS MAX_SIZE
    FROM ECOLI_DATA
    GROUP BY YEAR(DIFFERENTIATION_DATE))
    
SELECT M.YEAR, M.MAX_SIZE - E.SIZE_OF_COLONY AS YEAR_DEV, E.ID
FROM ECOLI_DATA AS E JOIN MAX_SIZE AS M
ON YEAR(E.DIFFERENTIATION_DATE) = M.YEAR
ORDER BY M.YEAR, YEAR_DEV;
```
